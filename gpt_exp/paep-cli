#!/bin/bash

# PAEP-R Global Command Wrapper
# This script activates the virtual environment and runs paep_engine.py from anywhere

# Get the real directory of the script (following symlinks)
SCRIPT_PATH="$(readlink -f "${BASH_SOURCE[0]}")"
SCRIPT_DIR="$(dirname "$SCRIPT_PATH")"

# Navigate to the project directory
cd "$SCRIPT_DIR"

# Check if virtual environment exists
if [ ! -d "venv" ]; then
    echo "❌ Error: Virtual environment not found in $SCRIPT_DIR"
    echo "Please run: python -m venv venv && source venv/bin/activate && pip install -r requirements.txt"
    exit 1
fi

# Check if GROQ_API_KEY is set
if [ -z "$GROQ_API_KEY" ]; then
    echo "⚠️  Warning: GROQ_API_KEY environment variable not set"
    echo "Please export GROQ_API_KEY='your_api_key_here'"
    echo ""
fi

# Activate virtual environment and run paep_engine.py
source venv/bin/activate && python paep_engine.py "$@"
